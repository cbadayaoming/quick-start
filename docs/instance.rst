.. instance .

---------
云主机管理
---------

创建云主机
=========

Nano中云主机是基于资源池创建的，Core收到创建云主机请求时，首先检测池内是否有可用Cell，然后评估各Cell可用资源和实时负载，选择加权负载最低的Cell创建实例。

在Nano中创建云主机时，有以下参数需要设置：

- 主机名：用于标识云主机，仅允许数字字母和'-'。
- 资源池：承载该实例的资源池名称，Nano会在指定资源池中选择合适的Cell节点进行创建
- 核心数：为云主机分配的核心数量，不建议设置超过Cell的最大物理线程数
- 内存：为云主机分配的内存大小，不能超过Cell的最大物理内存
- 系统磁盘：选择云主机系统磁盘的数据源，详情见后
- 数据磁盘：选择是否为云主机挂载额外的数据盘
- 开机启动：启用后，当Cell服务器开机时，会自动启动云主机实例

.. image:: images/3_1_create_instance.png

有三种系统盘数据源可选：空白系统、预制镜像和带Cloud-Init组件的预制镜像，Nano官网提供CentOS 7.5 Minimal的两种预制镜像 `下载 <https://nanos.cloud/zh-cn/download.html>`_

空白系统
-------

空白系统是默认选项。顾名思义，空白系统意味着创建出的云主机没有安装任何操作系统和软件，需要通过加载光盘镜像安装操作系统。空白系统通常用于构建模板云主机，详情请看平台管理的《构建模板镜像》章节。

.. image:: images/3_2_blank_system.png

预制镜像
-------

预制镜像的系统磁盘已经预装了操作系统和系统软件，并可能进行了一些配置优化和调整，预制镜像可以通过模板云主机构建，也可以从其他平台下载后直接上传系统。

创建云主机时，在系统镜像菜单中选择想要的预制镜像，克隆完成后的新主机拥有跟源镜像相同的系统和软件，能够开机直接使用。

.. image:: images/3_3_prebuilt_image.png

带Cloud-Init组件的预制镜像
-------------------------

带Clout Init组件的预制镜像系统中，在普通预制镜像的基础上，额外安装了clout-init和cloud-utils组件（CentOS中可以使用yum指令安装），配合Nano提供的Cloud Init服务，可以实现初始化管理员账号、自动格式化并挂载数据盘和扩展系统盘容量等多种便利的管理功能，极大地方便管理员快速部署云主机实例。

带Clout Init组件的预制镜像同样可以通过模板云主机构建或者直接，只是使用时，除了选择好源镜像，还需要勾选Cloud-Init模块并设置好初始化参数，以便Nano提供相应的服务。

.. image:: images/3_4_ci_image.png


实例起停和监控
=============


修改配置
=======

快照及恢复
=========

光盘镜像加载
===========
